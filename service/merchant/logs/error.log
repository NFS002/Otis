{"message": "Error in call to CreatePartnerMerchant: OperationalError('(psycopg2.OperationalError) FATAL:  role \"postgres\" does not exist\\n')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-05T11:09:05.352242", "request": "partnerMerchant {\n  name: \"greggs\"\n  sector: \"food\"\n}\n", "rollbar_uuid": "50aa7dc0-3f93-46c7-a85f-670555bde6c4", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 2345, in _wrap_pool_connect\n    return fn()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/pool/base.py\", line 364, in connect\n    return _ConnectionFairy._checkout(self)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/pool/base.py\", line 778, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/pool/base.py\", line 495, in checkout\n    rec = pool._do_get()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/pool/impl.py\", line 140, in _do_get\n    self._dec_overflow()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py\", line 69, in __exit__\n    exc_value, with_traceback=exc_tb,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/pool/impl.py\", line 137, in _do_get\n    return self._create_connection()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/pool/base.py\", line 309, in _create_connection\n    return _ConnectionRecord(self)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/pool/base.py\", line 440, in __init__\n    self.__connect(first_connect_check=True)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/pool/base.py\", line 661, in __connect\n    pool.logger.debug(\"Error on connect(): %s\", e)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py\", line 69, in __exit__\n    exc_value, with_traceback=exc_tb,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/pool/base.py\", line 656, in __connect\n    connection = pool._invoke_creator(self)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/strategies.py\", line 114, in connect\n    return dialect.connect(*cargs, **cparams)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 490, in connect\n    return self.dbapi.connect(*cargs, **cparams)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/psycopg2/__init__.py\", line 127, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\npsycopg2.OperationalError: FATAL:  role \"postgres\" does not exist\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 17, in wrap\n    return_value = func(*args, **kwargs)\n  File \"./impl/__init__.py\", line 42, in CreatePartnerMerchant\n    session.commit()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 1042, in commit\n    self.transaction.commit()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 504, in commit\n    self._prepare_impl()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 483, in _prepare_impl\n    self.session.flush()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2523, in flush\n    self._flush(objects)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2664, in _flush\n    transaction.rollback(_capture_exception=True)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py\", line 69, in __exit__\n    exc_value, with_traceback=exc_tb,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2624, in _flush\n    flush_context.execute()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py\", line 422, in execute\n    rec.execute(self)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py\", line 589, in execute\n    uow,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py\", line 213, in save_obj\n    ) in _organize_states_for_save(base_mapper, states, uowtransaction):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py\", line 374, in _organize_states_for_save\n    base_mapper, uowtransaction, states\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py\", line 1602, in _connections_for_states\n    connection = uowtransaction.transaction.connection(base_mapper)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 314, in connection\n    return self._connection_for_bind(bind, execution_options)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 421, in _connection_for_bind\n    conn = self._parent._connection_for_bind(bind, execution_options)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 433, in _connection_for_bind\n    conn = bind._contextual_connect()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 2311, in _contextual_connect\n    self._wrap_pool_connect(self.pool.connect, None),\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 2349, in _wrap_pool_connect\n    e, dialect, self\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1591, in _handle_dbapi_exception_noconnection\n    sqlalchemy_exception, with_traceback=exc_info[2], from_=e\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 2345, in _wrap_pool_connect\n    return fn()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/pool/base.py\", line 364, in connect\n    return _ConnectionFairy._checkout(self)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/pool/base.py\", line 778, in _checkout\n    fairy = _ConnectionRecord.checkout(pool)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/pool/base.py\", line 495, in checkout\n    rec = pool._do_get()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/pool/impl.py\", line 140, in _do_get\n    self._dec_overflow()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py\", line 69, in __exit__\n    exc_value, with_traceback=exc_tb,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/pool/impl.py\", line 137, in _do_get\n    return self._create_connection()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/pool/base.py\", line 309, in _create_connection\n    return _ConnectionRecord(self)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/pool/base.py\", line 440, in __init__\n    self.__connect(first_connect_check=True)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/pool/base.py\", line 661, in __connect\n    pool.logger.debug(\"Error on connect(): %s\", e)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py\", line 69, in __exit__\n    exc_value, with_traceback=exc_tb,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/pool/base.py\", line 656, in __connect\n    connection = pool._invoke_creator(self)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/strategies.py\", line 114, in connect\n    return dialect.connect(*cargs, **cparams)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 490, in connect\n    return self.dbapi.connect(*cargs, **cparams)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/psycopg2/__init__.py\", line 127, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\nsqlalchemy.exc.OperationalError: (psycopg2.OperationalError) FATAL:  role \"postgres\" does not exist\n\n(Background on this error at: http://sqlalche.me/e/e3q8)\n"}
{"message": "Error in call to CreatePartnerMerchant: ProgrammingError('(psycopg2.errors.UndefinedTable) relation \"merchants\" does not exist\\nLINE 1: INSERT INTO merchants (deleted_at, updated_at, name) VALUES ...\\n                    ^\\n')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-05T11:11:46.452216", "request": "partnerMerchant {\n  name: \"greggs\"\n  sector: \"food\"\n}\n", "rollbar_uuid": "2b19095a-eec5-48c2-aac7-7fbbae8d1bd8", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.UndefinedTable: relation \"merchants\" does not exist\nLINE 1: INSERT INTO merchants (deleted_at, updated_at, name) VALUES ...\n                    ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 17, in wrap\n    return_value = func(*args, **kwargs)\n  File \"./impl/__init__.py\", line 42, in CreatePartnerMerchant\n    session.commit()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 1042, in commit\n    self.transaction.commit()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 504, in commit\n    self._prepare_impl()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 483, in _prepare_impl\n    self.session.flush()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2523, in flush\n    self._flush(objects)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2664, in _flush\n    transaction.rollback(_capture_exception=True)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py\", line 69, in __exit__\n    exc_value, with_traceback=exc_tb,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2624, in _flush\n    flush_context.execute()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py\", line 422, in execute\n    rec.execute(self)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py\", line 589, in execute\n    uow,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py\", line 245, in save_obj\n    insert,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py\", line 1136, in _emit_insert_statements\n    statement, params\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1020, in execute\n    return meth(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/elements.py\", line 298, in _execute_on_connection\n    return connection._execute_clauseelement(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1139, in _execute_clauseelement\n    distilled_params,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1324, in _execute_context\n    e, statement, parameters, cursor, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1518, in _handle_dbapi_exception\n    sqlalchemy_exception, with_traceback=exc_info[2], from_=e\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation \"merchants\" does not exist\nLINE 1: INSERT INTO merchants (deleted_at, updated_at, name) VALUES ...\n                    ^\n\n[SQL: INSERT INTO merchants (deleted_at, updated_at, name) VALUES (%(deleted_at)s, %(updated_at)s, %(name)s) RETURNING merchants.id]\n[parameters: {'deleted_at': None, 'updated_at': None, 'name': 'greggs'}]\n(Background on this error at: http://sqlalche.me/e/f405)\n"}
{"message": "Error in call to CreatePartnerMerchant: ProgrammingError('(psycopg2.errors.UndefinedTable) relation \"merchants\" does not exist\\nLINE 1: INSERT INTO merchants (deleted_at, updated_at, name) VALUES ...\\n                    ^\\n')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-05T11:13:05.500726", "request": "partnerMerchant {\n  name: \"greggs\"\n  sector: \"food\"\n}\n", "rollbar_uuid": "f0084b57-86a0-4784-aa40-9aa52ef0bad2", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.UndefinedTable: relation \"merchants\" does not exist\nLINE 1: INSERT INTO merchants (deleted_at, updated_at, name) VALUES ...\n                    ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 17, in wrap\n    return_value = func(*args, **kwargs)\n  File \"./impl/__init__.py\", line 42, in CreatePartnerMerchant\n    session.commit()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 1042, in commit\n    self.transaction.commit()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 504, in commit\n    self._prepare_impl()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 483, in _prepare_impl\n    self.session.flush()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2523, in flush\n    self._flush(objects)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2664, in _flush\n    transaction.rollback(_capture_exception=True)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py\", line 69, in __exit__\n    exc_value, with_traceback=exc_tb,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2624, in _flush\n    flush_context.execute()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py\", line 422, in execute\n    rec.execute(self)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py\", line 589, in execute\n    uow,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py\", line 245, in save_obj\n    insert,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py\", line 1136, in _emit_insert_statements\n    statement, params\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1020, in execute\n    return meth(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/elements.py\", line 298, in _execute_on_connection\n    return connection._execute_clauseelement(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1139, in _execute_clauseelement\n    distilled_params,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1324, in _execute_context\n    e, statement, parameters, cursor, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1518, in _handle_dbapi_exception\n    sqlalchemy_exception, with_traceback=exc_info[2], from_=e\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation \"merchants\" does not exist\nLINE 1: INSERT INTO merchants (deleted_at, updated_at, name) VALUES ...\n                    ^\n\n[SQL: INSERT INTO merchants (deleted_at, updated_at, name) VALUES (%(deleted_at)s, %(updated_at)s, %(name)s) RETURNING merchants.id]\n[parameters: {'deleted_at': None, 'updated_at': None, 'name': 'greggs'}]\n(Background on this error at: http://sqlalche.me/e/f405)\n"}
{"message": "Error in call to CreatePartnerMerchant: ProgrammingError('(psycopg2.errors.UndefinedTable) relation \"merchants\" does not exist\\nLINE 1: INSERT INTO merchants (deleted_at, updated_at, name) VALUES ...\\n                    ^\\n')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-05T11:16:26.714947", "request": "partnerMerchant {\n  name: \"greggs\"\n  sector: \"food\"\n}\n", "rollbar_uuid": "ff1a59ff-69ea-4977-949a-351768c49c99", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.UndefinedTable: relation \"merchants\" does not exist\nLINE 1: INSERT INTO merchants (deleted_at, updated_at, name) VALUES ...\n                    ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 17, in wrap\n    return_value = func(*args, **kwargs)\n  File \"./impl/__init__.py\", line 42, in CreatePartnerMerchant\n    session.commit()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 1042, in commit\n    self.transaction.commit()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 504, in commit\n    self._prepare_impl()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 483, in _prepare_impl\n    self.session.flush()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2523, in flush\n    self._flush(objects)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2664, in _flush\n    transaction.rollback(_capture_exception=True)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py\", line 69, in __exit__\n    exc_value, with_traceback=exc_tb,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2624, in _flush\n    flush_context.execute()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py\", line 422, in execute\n    rec.execute(self)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py\", line 589, in execute\n    uow,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py\", line 245, in save_obj\n    insert,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py\", line 1136, in _emit_insert_statements\n    statement, params\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1020, in execute\n    return meth(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/elements.py\", line 298, in _execute_on_connection\n    return connection._execute_clauseelement(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1139, in _execute_clauseelement\n    distilled_params,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1324, in _execute_context\n    e, statement, parameters, cursor, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1518, in _handle_dbapi_exception\n    sqlalchemy_exception, with_traceback=exc_info[2], from_=e\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation \"merchants\" does not exist\nLINE 1: INSERT INTO merchants (deleted_at, updated_at, name) VALUES ...\n                    ^\n\n[SQL: INSERT INTO merchants (deleted_at, updated_at, name) VALUES (%(deleted_at)s, %(updated_at)s, %(name)s) RETURNING merchants.id]\n[parameters: {'deleted_at': None, 'updated_at': None, 'name': 'greggs'}]\n(Background on this error at: http://sqlalche.me/e/f405)\n"}
{"message": "Error in call to CreatePartnerMerchant: ProgrammingError('(psycopg2.errors.UndefinedTable) relation \"merchants\" does not exist\\nLINE 1: INSERT INTO merchants (deleted_at, updated_at, name) VALUES ...\\n                    ^\\n')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-05T11:18:10.448021", "request": "partnerMerchant {\n  name: \"greggs\"\n  sector: \"food\"\n}\n", "rollbar_uuid": "6a4d4186-6c3b-4c48-9f33-e1580389c229", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.UndefinedTable: relation \"merchants\" does not exist\nLINE 1: INSERT INTO merchants (deleted_at, updated_at, name) VALUES ...\n                    ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 17, in wrap\n    return_value = func(*args, **kwargs)\n  File \"./impl/__init__.py\", line 42, in CreatePartnerMerchant\n    session.commit()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 1042, in commit\n    self.transaction.commit()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 504, in commit\n    self._prepare_impl()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 483, in _prepare_impl\n    self.session.flush()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2523, in flush\n    self._flush(objects)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2664, in _flush\n    transaction.rollback(_capture_exception=True)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py\", line 69, in __exit__\n    exc_value, with_traceback=exc_tb,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2624, in _flush\n    flush_context.execute()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py\", line 422, in execute\n    rec.execute(self)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py\", line 589, in execute\n    uow,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py\", line 245, in save_obj\n    insert,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py\", line 1136, in _emit_insert_statements\n    statement, params\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1020, in execute\n    return meth(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/elements.py\", line 298, in _execute_on_connection\n    return connection._execute_clauseelement(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1139, in _execute_clauseelement\n    distilled_params,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1324, in _execute_context\n    e, statement, parameters, cursor, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1518, in _handle_dbapi_exception\n    sqlalchemy_exception, with_traceback=exc_info[2], from_=e\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation \"merchants\" does not exist\nLINE 1: INSERT INTO merchants (deleted_at, updated_at, name) VALUES ...\n                    ^\n\n[SQL: INSERT INTO merchants (deleted_at, updated_at, name) VALUES (%(deleted_at)s, %(updated_at)s, %(name)s) RETURNING merchants.id]\n[parameters: {'deleted_at': None, 'updated_at': None, 'name': 'greggs'}]\n(Background on this error at: http://sqlalche.me/e/f405)\n"}
{"message": "Error in call to CreatePartnerMerchant: ProgrammingError('(psycopg2.errors.UndefinedTable) relation \"merchants\" does not exist\\nLINE 1: INSERT INTO merchants (deleted_at, updated_at, name) VALUES ...\\n                    ^\\n')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-05T11:18:40.908277", "request": "partnerMerchant {\n  name: \"greggs\"\n  sector: \"food\"\n}\n", "rollbar_uuid": "6a786deb-c760-49ea-9a07-32216fcbd5e6", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.UndefinedTable: relation \"merchants\" does not exist\nLINE 1: INSERT INTO merchants (deleted_at, updated_at, name) VALUES ...\n                    ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 17, in wrap\n    return_value = func(*args, **kwargs)\n  File \"./impl/__init__.py\", line 42, in CreatePartnerMerchant\n    session.commit()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 1042, in commit\n    self.transaction.commit()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 504, in commit\n    self._prepare_impl()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 483, in _prepare_impl\n    self.session.flush()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2523, in flush\n    self._flush(objects)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2664, in _flush\n    transaction.rollback(_capture_exception=True)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py\", line 69, in __exit__\n    exc_value, with_traceback=exc_tb,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2624, in _flush\n    flush_context.execute()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py\", line 422, in execute\n    rec.execute(self)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py\", line 589, in execute\n    uow,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py\", line 245, in save_obj\n    insert,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py\", line 1136, in _emit_insert_statements\n    statement, params\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1020, in execute\n    return meth(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/elements.py\", line 298, in _execute_on_connection\n    return connection._execute_clauseelement(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1139, in _execute_clauseelement\n    distilled_params,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1324, in _execute_context\n    e, statement, parameters, cursor, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1518, in _handle_dbapi_exception\n    sqlalchemy_exception, with_traceback=exc_info[2], from_=e\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation \"merchants\" does not exist\nLINE 1: INSERT INTO merchants (deleted_at, updated_at, name) VALUES ...\n                    ^\n\n[SQL: INSERT INTO merchants (deleted_at, updated_at, name) VALUES (%(deleted_at)s, %(updated_at)s, %(name)s) RETURNING merchants.id]\n[parameters: {'deleted_at': None, 'updated_at': None, 'name': 'greggs'}]\n(Background on this error at: http://sqlalche.me/e/f405)\n"}
{"message": "Error in call to CreatePartnerMerchant: ProgrammingError('(psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\\n')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-05T11:21:17.731513", "request": "partnerMerchant {\n  name: \"greggs\"\n  sector: \"food\"\n}\n", "rollbar_uuid": "0448b5a3-ec31-40fe-a28d-e4d469ae1cff", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.DuplicateTable: relation \"merchants\" already exists\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 17, in wrap\n    return_value = func(*args, **kwargs)\n  File \"./impl/__init__.py\", line 39, in CreatePartnerMerchant\n    Merchant.metadata.create_all(self.db_engine, checkfirst=False)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/schema.py\", line 4465, in create_all\n    ddl.SchemaGenerator, self, checkfirst=checkfirst, tables=tables\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 2104, in _run_visitor\n    conn._run_visitor(visitorcallable, element, **kwargs)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1663, in _run_visitor\n    visitorcallable(self.dialect, self, **kwargs).traverse_single(element)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 787, in visit_metadata\n    _is_metadata_operation=True,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 832, in visit_table\n    include_foreign_key_constraints,  # noqa\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1020, in execute\n    return meth(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 72, in _execute_on_connection\n    return connection._execute_ddl(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1082, in _execute_ddl\n    compiled,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1324, in _execute_context\n    e, statement, parameters, cursor, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1518, in _handle_dbapi_exception\n    sqlalchemy_exception, with_traceback=exc_info[2], from_=e\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\n\n[SQL: \nCREATE TABLE merchants (\n\tcreated_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, \n\tdeleted_at TIMESTAMP WITH TIME ZONE, \n\tupdated_at TIMESTAMP WITH TIME ZONE NOT NULL, \n\tid SERIAL NOT NULL, \n\tname VARCHAR NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n]\n(Background on this error at: http://sqlalche.me/e/f405)\n"}
{"message": "Error in call to CreatePartnerMerchant: ProgrammingError('(psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\\n')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-05T11:36:11.736426", "request": "partnerMerchant {\n  name: \"greggs\"\n  sector: \"food\"\n}\n", "rollbar_uuid": "8d1740b1-42d4-4ff8-8cdc-63b7a63487bd", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.DuplicateTable: relation \"merchants\" already exists\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 17, in wrap\n    return_value = func(*args, **kwargs)\n  File \"./impl/__init__.py\", line 39, in CreatePartnerMerchant\n    Merchant.metadata.create_all(self.db_engine, checkfirst=False)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/schema.py\", line 4465, in create_all\n    ddl.SchemaGenerator, self, checkfirst=checkfirst, tables=tables\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 2104, in _run_visitor\n    conn._run_visitor(visitorcallable, element, **kwargs)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1663, in _run_visitor\n    visitorcallable(self.dialect, self, **kwargs).traverse_single(element)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 787, in visit_metadata\n    _is_metadata_operation=True,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 832, in visit_table\n    include_foreign_key_constraints,  # noqa\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1020, in execute\n    return meth(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 72, in _execute_on_connection\n    return connection._execute_ddl(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1082, in _execute_ddl\n    compiled,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1324, in _execute_context\n    e, statement, parameters, cursor, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1518, in _handle_dbapi_exception\n    sqlalchemy_exception, with_traceback=exc_info[2], from_=e\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\n\n[SQL: \nCREATE TABLE merchants (\n\tcreated_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, \n\tdeleted_at TIMESTAMP WITH TIME ZONE, \n\tupdated_at TIMESTAMP WITH TIME ZONE NOT NULL, \n\tid SERIAL NOT NULL, \n\tname VARCHAR NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n]\n(Background on this error at: http://sqlalche.me/e/f405)\n"}
{"message": "Error in call to CreatePartnerMerchant: ProgrammingError('(psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\\n')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-05T12:11:24.848391", "request": "partnerMerchant {\n  name: \"greggs\"\n  sector: \"food\"\n}\n", "rollbar_uuid": "c0af6437-9c2f-49b7-a2e2-21c6243f4703", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.DuplicateTable: relation \"merchants\" already exists\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 17, in wrap\n    return_value = func(*args, **kwargs)\n  File \"./impl/__init__.py\", line 39, in CreatePartnerMerchant\n    Merchant.metadata.create_all(self.db_engine, checkfirst=False)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/schema.py\", line 4465, in create_all\n    ddl.SchemaGenerator, self, checkfirst=checkfirst, tables=tables\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 2104, in _run_visitor\n    conn._run_visitor(visitorcallable, element, **kwargs)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1663, in _run_visitor\n    visitorcallable(self.dialect, self, **kwargs).traverse_single(element)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 787, in visit_metadata\n    _is_metadata_operation=True,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 832, in visit_table\n    include_foreign_key_constraints,  # noqa\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1020, in execute\n    return meth(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 72, in _execute_on_connection\n    return connection._execute_ddl(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1082, in _execute_ddl\n    compiled,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1324, in _execute_context\n    e, statement, parameters, cursor, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1518, in _handle_dbapi_exception\n    sqlalchemy_exception, with_traceback=exc_info[2], from_=e\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\n\n[SQL: \nCREATE TABLE merchants (\n\tcreated_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, \n\tdeleted_at TIMESTAMP WITH TIME ZONE, \n\tupdated_at TIMESTAMP WITH TIME ZONE NOT NULL, \n\tid SERIAL NOT NULL, \n\tname VARCHAR NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n]\n(Background on this error at: http://sqlalche.me/e/f405)\n"}
{"message": "Error in call to CreatePartnerMerchant: ProgrammingError('(psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\\n')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-05T12:23:35.090351", "request": "partnerMerchant {\n  name: \"greggs\"\n  sector: \"food\"\n}\n", "rollbar_uuid": "74411851-1938-475e-8cc2-938d08e271f8", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.DuplicateTable: relation \"merchants\" already exists\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 17, in wrap\n    return_value = func(*args, **kwargs)\n  File \"./impl/__init__.py\", line 39, in CreatePartnerMerchant\n    Merchant.metadata.create_all(self.db_engine, checkfirst=False)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/schema.py\", line 4465, in create_all\n    ddl.SchemaGenerator, self, checkfirst=checkfirst, tables=tables\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 2104, in _run_visitor\n    conn._run_visitor(visitorcallable, element, **kwargs)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1663, in _run_visitor\n    visitorcallable(self.dialect, self, **kwargs).traverse_single(element)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 787, in visit_metadata\n    _is_metadata_operation=True,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 832, in visit_table\n    include_foreign_key_constraints,  # noqa\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1020, in execute\n    return meth(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 72, in _execute_on_connection\n    return connection._execute_ddl(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1082, in _execute_ddl\n    compiled,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1324, in _execute_context\n    e, statement, parameters, cursor, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1518, in _handle_dbapi_exception\n    sqlalchemy_exception, with_traceback=exc_info[2], from_=e\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\n\n[SQL: \nCREATE TABLE merchants (\n\tcreated_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, \n\tdeleted_at TIMESTAMP WITH TIME ZONE, \n\tupdated_at TIMESTAMP WITH TIME ZONE NOT NULL, \n\tid SERIAL NOT NULL, \n\tname VARCHAR NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n]\n(Background on this error at: http://sqlalche.me/e/f405)\n"}
{"message": "Error in call to CreatePartnerMerchant: ProgrammingError('(psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\\n')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-05T12:28:50.706116", "request": "partnerMerchant {\n  name: \"greggs\"\n  sector: \"food\"\n}\n", "rollbar_uuid": "d306ab4a-5ade-4608-95f2-17236bbbcebb", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.DuplicateTable: relation \"merchants\" already exists\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 17, in wrap\n    return_value = func(*args, **kwargs)\n  File \"./impl/__init__.py\", line 39, in CreatePartnerMerchant\n    Merchant.metadata.create_all(self.db_engine, checkfirst=False)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/schema.py\", line 4465, in create_all\n    ddl.SchemaGenerator, self, checkfirst=checkfirst, tables=tables\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 2104, in _run_visitor\n    conn._run_visitor(visitorcallable, element, **kwargs)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1663, in _run_visitor\n    visitorcallable(self.dialect, self, **kwargs).traverse_single(element)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 787, in visit_metadata\n    _is_metadata_operation=True,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 832, in visit_table\n    include_foreign_key_constraints,  # noqa\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1020, in execute\n    return meth(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 72, in _execute_on_connection\n    return connection._execute_ddl(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1082, in _execute_ddl\n    compiled,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1324, in _execute_context\n    e, statement, parameters, cursor, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1518, in _handle_dbapi_exception\n    sqlalchemy_exception, with_traceback=exc_info[2], from_=e\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\n\n[SQL: \nCREATE TABLE merchants (\n\tcreated_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, \n\tdeleted_at TIMESTAMP WITH TIME ZONE, \n\tupdated_at TIMESTAMP WITH TIME ZONE NOT NULL, \n\tid SERIAL NOT NULL, \n\tname VARCHAR NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n]\n(Background on this error at: http://sqlalche.me/e/f405)\n"}
{"message": "Error in call to CreatePartnerMerchant: ProgrammingError('(psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\\n')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-05T12:31:40.740007", "request": "partnerMerchant {\n  name: \"greggs\"\n  sector: \"food\"\n}\n", "rollbar_uuid": "f843c630-f6e2-47c2-ac0c-1a2f0ea82a3b", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.DuplicateTable: relation \"merchants\" already exists\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 17, in wrap\n    return_value = func(*args, **kwargs)\n  File \"./impl/__init__.py\", line 39, in CreatePartnerMerchant\n    Merchant.metadata.create_all(self.db_engine, checkfirst=False)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/schema.py\", line 4465, in create_all\n    ddl.SchemaGenerator, self, checkfirst=checkfirst, tables=tables\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 2104, in _run_visitor\n    conn._run_visitor(visitorcallable, element, **kwargs)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1663, in _run_visitor\n    visitorcallable(self.dialect, self, **kwargs).traverse_single(element)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 787, in visit_metadata\n    _is_metadata_operation=True,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 832, in visit_table\n    include_foreign_key_constraints,  # noqa\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1020, in execute\n    return meth(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 72, in _execute_on_connection\n    return connection._execute_ddl(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1082, in _execute_ddl\n    compiled,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1324, in _execute_context\n    e, statement, parameters, cursor, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1518, in _handle_dbapi_exception\n    sqlalchemy_exception, with_traceback=exc_info[2], from_=e\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\n\n[SQL: \nCREATE TABLE merchants (\n\tcreated_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, \n\tdeleted_at TIMESTAMP WITH TIME ZONE, \n\tupdated_at TIMESTAMP WITH TIME ZONE NOT NULL, \n\tid SERIAL NOT NULL, \n\tname VARCHAR NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n]\n(Background on this error at: http://sqlalche.me/e/f405)\n"}
{"message": "Error in call to CreatePartnerMerchant: ProgrammingError('(psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\\n')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-05T12:41:25.664404", "request": "partnerMerchant {\n  name: \"greggs\"\n  sector: \"food\"\n}\n", "rollbar_uuid": "0550fb16-e9aa-49ef-8f28-2e2041d559b1", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.DuplicateTable: relation \"merchants\" already exists\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 17, in wrap\n    return_value = func(*args, **kwargs)\n  File \"./impl/__init__.py\", line 39, in CreatePartnerMerchant\n    Merchant.metadata.create_all(self.db_engine, checkfirst=False)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/schema.py\", line 4465, in create_all\n    ddl.SchemaGenerator, self, checkfirst=checkfirst, tables=tables\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 2104, in _run_visitor\n    conn._run_visitor(visitorcallable, element, **kwargs)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1663, in _run_visitor\n    visitorcallable(self.dialect, self, **kwargs).traverse_single(element)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 787, in visit_metadata\n    _is_metadata_operation=True,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 832, in visit_table\n    include_foreign_key_constraints,  # noqa\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1020, in execute\n    return meth(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 72, in _execute_on_connection\n    return connection._execute_ddl(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1082, in _execute_ddl\n    compiled,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1324, in _execute_context\n    e, statement, parameters, cursor, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1518, in _handle_dbapi_exception\n    sqlalchemy_exception, with_traceback=exc_info[2], from_=e\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\n\n[SQL: \nCREATE TABLE merchants (\n\tcreated_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, \n\tdeleted_at TIMESTAMP WITH TIME ZONE, \n\tupdated_at TIMESTAMP WITH TIME ZONE NOT NULL, \n\tid SERIAL NOT NULL, \n\tname VARCHAR NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n]\n(Background on this error at: http://sqlalche.me/e/f405)\n"}
{"message": "Error in call to CreatePartnerMerchant: ProgrammingError('(psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\\n')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-05T12:47:43.270428", "request": "partnerMerchant {\n  name: \"greggs\"\n  sector: \"food\"\n}\n", "rollbar_uuid": "bca4727b-9268-4f48-87bc-d26923b57ff4", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.DuplicateTable: relation \"merchants\" already exists\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 17, in wrap\n    return_value = func(*args, **kwargs)\n  File \"./impl/__init__.py\", line 39, in CreatePartnerMerchant\n    Merchant.metadata.create_all(self.db_engine, checkfirst=False)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/schema.py\", line 4465, in create_all\n    ddl.SchemaGenerator, self, checkfirst=checkfirst, tables=tables\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 2104, in _run_visitor\n    conn._run_visitor(visitorcallable, element, **kwargs)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1663, in _run_visitor\n    visitorcallable(self.dialect, self, **kwargs).traverse_single(element)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 787, in visit_metadata\n    _is_metadata_operation=True,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 832, in visit_table\n    include_foreign_key_constraints,  # noqa\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1020, in execute\n    return meth(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 72, in _execute_on_connection\n    return connection._execute_ddl(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1082, in _execute_ddl\n    compiled,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1324, in _execute_context\n    e, statement, parameters, cursor, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1518, in _handle_dbapi_exception\n    sqlalchemy_exception, with_traceback=exc_info[2], from_=e\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\n\n[SQL: \nCREATE TABLE merchants (\n\tcreated_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, \n\tdeleted_at TIMESTAMP WITH TIME ZONE, \n\tupdated_at TIMESTAMP WITH TIME ZONE NOT NULL, \n\tid SERIAL NOT NULL, \n\tname VARCHAR NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n]\n(Background on this error at: http://sqlalche.me/e/f405)\n"}
{"message": "Error in call to CreatePartnerMerchant: ProgrammingError('(psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\\n')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-05T13:24:07.367072", "request": "partnerMerchant {\n  name: \"greggs\"\n  sector: \"food\"\n}\n", "rollbar_uuid": "29c3519b-4065-4548-b46a-3409a2f9f661", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.DuplicateTable: relation \"merchants\" already exists\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 17, in wrap\n    return_value = func(*args, **kwargs)\n  File \"./impl/__init__.py\", line 38, in CreatePartnerMerchant\n    Merchant.metadata.create_all(self.db_engine, checkfirst=False)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/schema.py\", line 4465, in create_all\n    ddl.SchemaGenerator, self, checkfirst=checkfirst, tables=tables\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 2104, in _run_visitor\n    conn._run_visitor(visitorcallable, element, **kwargs)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1663, in _run_visitor\n    visitorcallable(self.dialect, self, **kwargs).traverse_single(element)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 787, in visit_metadata\n    _is_metadata_operation=True,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 832, in visit_table\n    include_foreign_key_constraints,  # noqa\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1020, in execute\n    return meth(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 72, in _execute_on_connection\n    return connection._execute_ddl(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1082, in _execute_ddl\n    compiled,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1324, in _execute_context\n    e, statement, parameters, cursor, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1518, in _handle_dbapi_exception\n    sqlalchemy_exception, with_traceback=exc_info[2], from_=e\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\n\n[SQL: \nCREATE TABLE merchants (\n\tcreated_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, \n\tdeleted_at TIMESTAMP WITH TIME ZONE, \n\tupdated_at TIMESTAMP WITH TIME ZONE NOT NULL, \n\tid SERIAL NOT NULL, \n\tname VARCHAR NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n]\n(Background on this error at: http://sqlalche.me/e/f405)\n"}
{"message": "Error in call to CreatePartnerMerchant: ProgrammingError('(psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\\n')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-05T14:29:50.582677", "request": "partnerMerchant {\n  name: \"greggs\"\n  sector: \"food\"\n}\n", "rollbar_uuid": "f927b73f-d476-4fac-a537-013509caf695", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.DuplicateTable: relation \"merchants\" already exists\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 17, in wrap\n    return_value = func(*args, **kwargs)\n  File \"./impl/__init__.py\", line 38, in CreatePartnerMerchant\n    Merchant.metadata.create_all(self.db_engine, checkfirst=False)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/schema.py\", line 4465, in create_all\n    ddl.SchemaGenerator, self, checkfirst=checkfirst, tables=tables\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 2104, in _run_visitor\n    conn._run_visitor(visitorcallable, element, **kwargs)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1663, in _run_visitor\n    visitorcallable(self.dialect, self, **kwargs).traverse_single(element)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 787, in visit_metadata\n    _is_metadata_operation=True,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 832, in visit_table\n    include_foreign_key_constraints,  # noqa\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1020, in execute\n    return meth(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 72, in _execute_on_connection\n    return connection._execute_ddl(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1082, in _execute_ddl\n    compiled,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1324, in _execute_context\n    e, statement, parameters, cursor, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1518, in _handle_dbapi_exception\n    sqlalchemy_exception, with_traceback=exc_info[2], from_=e\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\n\n[SQL: \nCREATE TABLE merchants (\n\tcreated_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, \n\tdeleted_at TIMESTAMP WITH TIME ZONE, \n\tupdated_at TIMESTAMP WITH TIME ZONE NOT NULL, \n\tid SERIAL NOT NULL, \n\tname VARCHAR NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n]\n(Background on this error at: http://sqlalche.me/e/f405)\n"}
{"message": "Error in call to CreatePartnerMerchant: AttributeError(\"'sessionmaker' object has no attribute 'add'\")", "level": "ERROR", "name": "merchant-service", "time": "2020-06-05T14:31:12.827163", "request": "partnerMerchant {\n  name: \"greggs\"\n  sector: \"food\"\n}\n", "rollbar_uuid": "ba3a9651-af2a-4c12-a4ea-2add98988510", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 17, in wrap\n    return_value = func(*args, **kwargs)\n  File \"./impl/__init__.py\", line 40, in CreatePartnerMerchant\n    session.add(merchant)\nAttributeError: 'sessionmaker' object has no attribute 'add'\n"}
{"message": "Error in call to CreatePartnerMerchant: IntegrityError('(psycopg2.errors.NotNullViolation) null value in column \"updated_at\" violates not-null constraint\\nDETAIL:  Failing row contains (2020-06-05 14:48:22.289855+01, null, null, 1, greggs).\\n')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-05T14:48:22.439905", "request": "partnerMerchant {\n  name: \"greggs\"\n  sector: \"food\"\n}\n", "rollbar_uuid": "cb32eda4-8049-4e69-b3f0-af5b4b46e521", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.NotNullViolation: null value in column \"updated_at\" violates not-null constraint\nDETAIL:  Failing row contains (2020-06-05 14:48:22.289855+01, null, null, 1, greggs).\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 17, in wrap\n    return_value = func(*args, **kwargs)\n  File \"./impl/__init__.py\", line 41, in CreatePartnerMerchant\n    session.commit()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 1042, in commit\n    self.transaction.commit()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 504, in commit\n    self._prepare_impl()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 483, in _prepare_impl\n    self.session.flush()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2523, in flush\n    self._flush(objects)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2664, in _flush\n    transaction.rollback(_capture_exception=True)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py\", line 69, in __exit__\n    exc_value, with_traceback=exc_tb,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2624, in _flush\n    flush_context.execute()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py\", line 422, in execute\n    rec.execute(self)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py\", line 589, in execute\n    uow,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py\", line 245, in save_obj\n    insert,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py\", line 1136, in _emit_insert_statements\n    statement, params\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1020, in execute\n    return meth(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/elements.py\", line 298, in _execute_on_connection\n    return connection._execute_clauseelement(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1139, in _execute_clauseelement\n    distilled_params,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1324, in _execute_context\n    e, statement, parameters, cursor, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1518, in _handle_dbapi_exception\n    sqlalchemy_exception, with_traceback=exc_info[2], from_=e\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column \"updated_at\" violates not-null constraint\nDETAIL:  Failing row contains (2020-06-05 14:48:22.289855+01, null, null, 1, greggs).\n\n[SQL: INSERT INTO merchants (deleted_at, updated_at, name) VALUES (%(deleted_at)s, %(updated_at)s, %(name)s) RETURNING merchants.id]\n[parameters: {'deleted_at': None, 'updated_at': None, 'name': 'greggs'}]\n(Background on this error at: http://sqlalche.me/e/gkpj)\n"}
{"message": "Error in call to CreatePartnerMerchant: ProgrammingError('(psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\\n')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-05T15:43:27.844812", "request": "partnerMerchant {\n  name: \"greggs\"\n  sector: \"food\"\n}\n", "rollbar_uuid": "fa36d9d0-e674-4fca-8f61-a9e16d087d25", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.DuplicateTable: relation \"merchants\" already exists\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 17, in wrap\n    return_value = func(*args, **kwargs)\n  File \"./impl/__init__.py\", line 36, in CreatePartnerMerchant\n    Merchant.metadata.create_all(self.db_engine, checkfirst=False)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/schema.py\", line 4465, in create_all\n    ddl.SchemaGenerator, self, checkfirst=checkfirst, tables=tables\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 2104, in _run_visitor\n    conn._run_visitor(visitorcallable, element, **kwargs)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1663, in _run_visitor\n    visitorcallable(self.dialect, self, **kwargs).traverse_single(element)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 787, in visit_metadata\n    _is_metadata_operation=True,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 832, in visit_table\n    include_foreign_key_constraints,  # noqa\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1020, in execute\n    return meth(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 72, in _execute_on_connection\n    return connection._execute_ddl(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1082, in _execute_ddl\n    compiled,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1324, in _execute_context\n    e, statement, parameters, cursor, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1518, in _handle_dbapi_exception\n    sqlalchemy_exception, with_traceback=exc_info[2], from_=e\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\n\n[SQL: \nCREATE TABLE merchants (\n\tcreated_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, \n\tdeleted_at TIMESTAMP WITH TIME ZONE, \n\tupdated_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, \n\tid SERIAL NOT NULL, \n\tname VARCHAR NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n]\n(Background on this error at: http://sqlalche.me/e/f405)\n"}
{"message": "Error in call to CreatePartnerMerchant: AttributeError(\"type object 'Merchant' has no attribute 'query'\")", "level": "ERROR", "name": "merchant-service", "time": "2020-06-05T16:05:33.163038", "request": "partnerMerchant {\n  name: \"greggs\"\n  sector: \"food\"\n}\n", "rollbar_uuid": "6520b686-9721-4b95-827b-9fc9fbcdf722", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 17, in wrap\n    return_value = func(*args, **kwargs)\n  File \"./impl/__init__.py\", line 45, in CreatePartnerMerchant\n    merchant = Merchant.query.filter_by(name=partner_merchant.name).first()\nAttributeError: type object 'Merchant' has no attribute 'query'\n"}
{"message": "Error in call to CreatePartnerMerchant: ProgrammingError('(psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\\n')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-05T16:19:29.752408", "request": "partnerMerchant {\n  name: \"greggs\"\n  sector: \"food\"\n}\n", "rollbar_uuid": "20b2e5df-fc09-45ff-afc1-14b2b7a5e011", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.DuplicateTable: relation \"merchants\" already exists\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 17, in wrap\n    return_value = func(*args, **kwargs)\n  File \"./impl/__init__.py\", line 36, in CreatePartnerMerchant\n    session = self.Session()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/schema.py\", line 4465, in create_all\n    ddl.SchemaGenerator, self, checkfirst=checkfirst, tables=tables\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 2104, in _run_visitor\n    conn._run_visitor(visitorcallable, element, **kwargs)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1663, in _run_visitor\n    visitorcallable(self.dialect, self, **kwargs).traverse_single(element)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 787, in visit_metadata\n    _is_metadata_operation=True,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 832, in visit_table\n    include_foreign_key_constraints,  # noqa\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1020, in execute\n    return meth(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 72, in _execute_on_connection\n    return connection._execute_ddl(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1082, in _execute_ddl\n    compiled,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1324, in _execute_context\n    e, statement, parameters, cursor, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1518, in _handle_dbapi_exception\n    sqlalchemy_exception, with_traceback=exc_info[2], from_=e\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\n\n[SQL: \nCREATE TABLE merchants (\n\tcreated_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, \n\tdeleted_at TIMESTAMP WITH TIME ZONE, \n\tupdated_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, \n\tid SERIAL NOT NULL, \n\tname VARCHAR NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n]\n(Background on this error at: http://sqlalche.me/e/f405)\n"}
{"message": "Error in call to CreatePartnerMerchant: ProgrammingError('(psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\\n')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-05T23:08:36.855862", "request": "partnerMerchant {\n  name: \"greggs\"\n  sector: \"food\"\n}\n", "rollbar_uuid": "afa29d96-c8ba-4b84-9633-736ec5f88f3f", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.DuplicateTable: relation \"merchants\" already exists\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 17, in wrap\n    return_value = func(*args, **kwargs)\n  File \"./impl/__init__.py\", line 36, in CreatePartnerMerchant\n    Merchant.metadata.create_all(self.db_engine, checkfirst=False)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/schema.py\", line 4465, in create_all\n    ddl.SchemaGenerator, self, checkfirst=checkfirst, tables=tables\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 2104, in _run_visitor\n    conn._run_visitor(visitorcallable, element, **kwargs)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1663, in _run_visitor\n    visitorcallable(self.dialect, self, **kwargs).traverse_single(element)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 787, in visit_metadata\n    _is_metadata_operation=True,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 832, in visit_table\n    include_foreign_key_constraints,  # noqa\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1020, in execute\n    return meth(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 72, in _execute_on_connection\n    return connection._execute_ddl(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1082, in _execute_ddl\n    compiled,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1324, in _execute_context\n    e, statement, parameters, cursor, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1518, in _handle_dbapi_exception\n    sqlalchemy_exception, with_traceback=exc_info[2], from_=e\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\n\n[SQL: \nCREATE TABLE merchants (\n\tcreated_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, \n\tdeleted_at TIMESTAMP WITH TIME ZONE, \n\tupdated_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, \n\tid SERIAL NOT NULL, \n\tname VARCHAR NOT NULL, \n\tsector VARCHAR NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n]\n(Background on this error at: http://sqlalche.me/e/f405)\n"}
{"message": "Error in call to CreatePartnerMerchant: AttributeError(\"'dict' object has no attribute 'partnerMerchant'\")", "level": "ERROR", "name": "merchant-service", "time": "2020-06-05T23:27:26.591342", "request": {"raw": "partnerMerchant {\n  name: \"greggs\"\n  sector: \"food\"\n}\n", "dict": {"partnerMerchant": {"name": "greggs", "sector": "food"}}}, "rollbar_uuid": "74ff0e98-8737-4c8a-b771-f1da7ca201f3", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, request_dict=request_dict)\n  File \"./impl/__init__.py\", line 40, in CreatePartnerMerchant\n    merchant = Merchant(**request_dict.partnerMerchant)\nAttributeError: 'dict' object has no attribute 'partnerMerchant'\n"}
{"message": "Error in call to CreateGeneralMerchant: IntegrityError('(psycopg2.errors.NotNullViolation) null value in column \"name\" violates not-null constraint\\nDETAIL:  Failing row contains (2020-06-06 22:46:15.700975+01, null, 2020-06-06 22:46:15.700975+01, 3, null, null).\\n')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-06T22:46:15.849320", "request": {"raw": "partnerMerchant {\n}\ngeneralMerchant {\n}\n", "optional_request_dict": {"partnerMerchant": {}, "generalMerchant": {}}}, "rollbar_uuid": "3b978948-7e65-4deb-9ebf-4372afabbb26", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.NotNullViolation: null value in column \"name\" violates not-null constraint\nDETAIL:  Failing row contains (2020-06-06 22:46:15.700975+01, null, 2020-06-06 22:46:15.700975+01, 3, null, null).\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/__init__.py\", line 33, in CreateGeneralMerchant\n    session.commit()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 1042, in commit\n    self.transaction.commit()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 504, in commit\n    self._prepare_impl()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 483, in _prepare_impl\n    self.session.flush()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2523, in flush\n    self._flush(objects)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2664, in _flush\n    transaction.rollback(_capture_exception=True)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py\", line 69, in __exit__\n    exc_value, with_traceback=exc_tb,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2624, in _flush\n    flush_context.execute()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py\", line 422, in execute\n    rec.execute(self)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py\", line 589, in execute\n    uow,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py\", line 245, in save_obj\n    insert,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py\", line 1136, in _emit_insert_statements\n    statement, params\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1020, in execute\n    return meth(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/elements.py\", line 298, in _execute_on_connection\n    return connection._execute_clauseelement(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1139, in _execute_clauseelement\n    distilled_params,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1324, in _execute_context\n    e, statement, parameters, cursor, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1518, in _handle_dbapi_exception\n    sqlalchemy_exception, with_traceback=exc_info[2], from_=e\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column \"name\" violates not-null constraint\nDETAIL:  Failing row contains (2020-06-06 22:46:15.700975+01, null, 2020-06-06 22:46:15.700975+01, 3, null, null).\n\n[SQL: INSERT INTO merchants (deleted_at, name, sector) VALUES (%(deleted_at)s, %(name)s, %(sector)s) RETURNING merchants.id]\n[parameters: {'deleted_at': None, 'name': None, 'sector': None}]\n(Background on this error at: http://sqlalche.me/e/gkpj)\n"}
{"message": "Error in call to CreateGeneralMerchant: IntegrityError('(psycopg2.errors.NotNullViolation) null value in column \"name\" violates not-null constraint\\nDETAIL:  Failing row contains (2020-06-06 22:53:32.52846+01, null, 2020-06-06 22:53:32.52846+01, 4, null, null).\\n')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-06T22:53:32.647150", "request": {"raw": "partnerMerchant {\n}\ngeneralMerchant {\n}\n", "optional_request_dict": {"partnerMerchant": {}, "generalMerchant": {}}}, "rollbar_uuid": "aa5da9fe-9dae-4bde-9bee-dfcff842c638", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.NotNullViolation: null value in column \"name\" violates not-null constraint\nDETAIL:  Failing row contains (2020-06-06 22:53:32.52846+01, null, 2020-06-06 22:53:32.52846+01, 4, null, null).\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/__init__.py\", line 33, in CreateGeneralMerchant\n    session.commit()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 1042, in commit\n    self.transaction.commit()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 504, in commit\n    self._prepare_impl()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 483, in _prepare_impl\n    self.session.flush()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2523, in flush\n    self._flush(objects)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2664, in _flush\n    transaction.rollback(_capture_exception=True)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py\", line 69, in __exit__\n    exc_value, with_traceback=exc_tb,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2624, in _flush\n    flush_context.execute()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py\", line 422, in execute\n    rec.execute(self)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py\", line 589, in execute\n    uow,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py\", line 245, in save_obj\n    insert,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py\", line 1136, in _emit_insert_statements\n    statement, params\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1020, in execute\n    return meth(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/elements.py\", line 298, in _execute_on_connection\n    return connection._execute_clauseelement(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1139, in _execute_clauseelement\n    distilled_params,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1324, in _execute_context\n    e, statement, parameters, cursor, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1518, in _handle_dbapi_exception\n    sqlalchemy_exception, with_traceback=exc_info[2], from_=e\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column \"name\" violates not-null constraint\nDETAIL:  Failing row contains (2020-06-06 22:53:32.52846+01, null, 2020-06-06 22:53:32.52846+01, 4, null, null).\n\n[SQL: INSERT INTO merchants (deleted_at, name, sector) VALUES (%(deleted_at)s, %(name)s, %(sector)s) RETURNING merchants.id]\n[parameters: {'deleted_at': None, 'name': None, 'sector': None}]\n(Background on this error at: http://sqlalche.me/e/gkpj)\n"}
{"message": "Error in call to GetGeneralMerchant: TypeError('DeclarativeMeta object argument after ** must be a mapping, not str')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-06T23:24:19.439100", "request": {"raw": "merchantID: \"23034\"\n", "optional_request_dict": {"merchantID": "23034"}}, "rollbar_uuid": "9253ac67-e324-4109-aebd-b3e6a0bf664d", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/__init__.py\", line 57, in GetGeneralMerchant\n    merchant_id = Merchant(**optional_request_dict['merchantID'])\nTypeError: DeclarativeMeta object argument after ** must be a mapping, not str\n"}
{"message": "Error in call to GetGeneralMerchant: TypeError('DeclarativeMeta object argument after ** must be a mapping, not str')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-06T23:25:59.537416", "request": {"raw": "merchantID: \"23034\"\n", "optional_request_dict": {"merchantID": "23034"}}, "rollbar_uuid": "dc85266f-acb5-4448-a75a-93357b028a3d", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/__init__.py\", line 57, in GetGeneralMerchant\n    merchant_id = Merchant(**optional_request_dict['merchantID'])\nTypeError: DeclarativeMeta object argument after ** must be a mapping, not str\n"}
{"message": "Error in call to GetGeneralMerchant: TypeError('DeclarativeMeta object argument after ** must be a mapping, not str')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-06T23:26:31.483942", "request": {"raw": "merchantID: \"23034\"\n", "optional_request_dict": {"merchantID": "23034"}}, "rollbar_uuid": "7e943358-d5b1-47dc-8e60-a57eb2180fe0", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/__init__.py\", line 57, in GetGeneralMerchant\n    merchant_id = Merchant(**optional_request_dict['merchantID'])\nTypeError: DeclarativeMeta object argument after ** must be a mapping, not str\n"}
{"message": "Error in call to GetGeneralMerchant: TypeError('DeclarativeMeta object argument after ** must be a mapping, not str')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-06T23:26:55.581928", "request": {"raw": "merchantID: \"23034\"\n", "optional_request_dict": {"merchantID": "23034"}}, "rollbar_uuid": "03ae7999-9def-488c-8673-1e53dbdb2591", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/__init__.py\", line 57, in GetGeneralMerchant\n    merchant_id = Merchant(**optional_request_dict['merchantID'])\nTypeError: DeclarativeMeta object argument after ** must be a mapping, not str\n"}
{"message": "Error in call to GetGeneralMerchant: TypeError('DeclarativeMeta object argument after ** must be a mapping, not str')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-06T23:27:15.907631", "request": {"raw": "merchantID: \"23034\"\n", "optional_request_dict": {"merchantID": "23034"}}, "rollbar_uuid": "69c325fd-030a-4109-adf3-241ae36162c5", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/__init__.py\", line 57, in GetGeneralMerchant\n    merchant_id = Merchant(**optional_request_dict['merchantID'])\nTypeError: DeclarativeMeta object argument after ** must be a mapping, not str\n"}
{"message": "Error in call to GetGeneralMerchant: TypeError('DeclarativeMeta object argument after ** must be a mapping, not str')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-06T23:29:33.177896", "request": {"raw": "merchantID: \"23034\"\n", "optional_request_dict": {"merchantID": "23034"}}, "rollbar_uuid": "fba55f79-0804-4647-bf16-3716d2a114db", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/__init__.py\", line 57, in GetGeneralMerchant\n    merchant_id = Merchant(**optional_request_dict['merchantID'])\nTypeError: DeclarativeMeta object argument after ** must be a mapping, not str\n"}
{"message": "Error in call to GetGeneralMerchant: TypeError('DeclarativeMeta object argument after ** must be a mapping, not str')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-06T23:32:57.330704", "request": {"raw": "merchantID: \"23034\"\n", "optional_request_dict": {"merchantID": "23034"}}, "rollbar_uuid": "b7ba4af6-9da1-40e0-97ba-c0a4828c9787", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/__init__.py\", line 57, in GetGeneralMerchant\n    merchant_id = Merchant(**optional_request_dict['merchantID'])\nTypeError: DeclarativeMeta object argument after ** must be a mapping, not str\n"}
{"message": "Error in call to GetGeneralMerchant: TypeError('DeclarativeMeta object argument after ** must be a mapping, not str')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-06T23:35:17.685993", "request": {"raw": "merchantID: \"23034\"\n", "optional_request_dict": {"merchantID": "23034"}}, "rollbar_uuid": "d4207911-171b-485e-9b9b-5f7e88ed7145", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/__init__.py\", line 57, in GetGeneralMerchant\n    merchant_id = Merchant(**optional_request_dict['merchantID'])\nTypeError: DeclarativeMeta object argument after ** must be a mapping, not str\n"}
{"message": "Error in call to GetGeneralMerchant: TypeError('DeclarativeMeta object argument after ** must be a mapping, not str')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-06T23:42:06.839700", "request": {"raw": "merchantID: \"23034\"\n", "optional_request_dict": {"merchantID": "23034"}}, "rollbar_uuid": "e721be72-35de-45d7-b816-074bdb2b9151", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/__init__.py\", line 57, in GetGeneralMerchant\n    merchant_id = Merchant(**optional_request_dict['merchantID'])\nTypeError: DeclarativeMeta object argument after ** must be a mapping, not str\n"}
{"message": "Error in call to GetGeneralMerchant: TypeError('DeclarativeMeta object argument after ** must be a mapping, not str')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-06T23:45:29.820859", "request": {"raw": "merchantID: \"23034\"\n", "optional_request_dict": {"merchantID": "23034"}}, "rollbar_uuid": "90a49d54-4ef1-4027-bc8c-058ac2dc0f22", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/__init__.py\", line 57, in GetGeneralMerchant\n    merchant_id = Merchant(**optional_request_dict['merchantID'])\nTypeError: DeclarativeMeta object argument after ** must be a mapping, not str\n"}
{"message": "Error in call to GetGeneralMerchant: TypeError('DeclarativeMeta object argument after ** must be a mapping, not str')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-06T23:52:56.404806", "request": {"raw": "merchantID: \"23034\"\n", "optional_request_dict": {"merchantID": "23034"}}, "rollbar_uuid": "85e5c48d-3975-4b8c-a3e2-37a89b752e1d", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/__init__.py\", line 57, in GetGeneralMerchant\n    merchant_id = Merchant(**(optional_request_dict['merchantID']))\nTypeError: DeclarativeMeta object argument after ** must be a mapping, not str\n"}
{"message": "Error in call to GetGeneralMerchant: TypeError('Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got NoneType.')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-06T23:55:20.213108", "request": {"raw": "merchantID: \"23034\"\n", "optional_request_dict": {"merchantID": "23034"}}, "rollbar_uuid": "53a152c6-611a-4be1-832a-3fcaa0c7c254", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/__init__.py\", line 61, in GetGeneralMerchant\n    return merchant_service_pb2.MerchantsResponse(generalMerchants=[merchant], executed=True)\nTypeError: Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got NoneType.\n"}
{"message": "Error in call to CreatePartnerMerchant: ProgrammingError('(psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\\n')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T00:40:20.567547", "request": {"raw": "partnerMerchant {\n  name: \"webuyanycar\"\n  sector: \"cars\"\n}\n", "optional_request_dict": {"partnerMerchant": {"name": "webuyanycar", "sector": "cars"}}}, "rollbar_uuid": "92aebf4d-0d8a-4b4d-ae0e-e86840f3d4e8", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.DuplicateTable: relation \"merchants\" already exists\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 40, in CreatePartnerMerchant\n    Merchant.metadata.create_all(self.db_engine, checkfirst=False)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/schema.py\", line 4465, in create_all\n    ddl.SchemaGenerator, self, checkfirst=checkfirst, tables=tables\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 2104, in _run_visitor\n    conn._run_visitor(visitorcallable, element, **kwargs)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1663, in _run_visitor\n    visitorcallable(self.dialect, self, **kwargs).traverse_single(element)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 787, in visit_metadata\n    _is_metadata_operation=True,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 832, in visit_table\n    include_foreign_key_constraints,  # noqa\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1020, in execute\n    return meth(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 72, in _execute_on_connection\n    return connection._execute_ddl(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1082, in _execute_ddl\n    compiled,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1324, in _execute_context\n    e, statement, parameters, cursor, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1518, in _handle_dbapi_exception\n    sqlalchemy_exception, with_traceback=exc_info[2], from_=e\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\n\n[SQL: \nCREATE TABLE merchants (\n\tcreated_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, \n\tdeleted_at TIMESTAMP WITH TIME ZONE, \n\tupdated_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, \n\tid SERIAL NOT NULL, \n\tname VARCHAR NOT NULL, \n\tsector VARCHAR NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n]\n(Background on this error at: http://sqlalche.me/e/f405)\n"}
{"message": "Error in call to GetGeneralMerchant: TypeError('Value must be iterable')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T00:46:24.821850", "request": {"raw": "merchantID: \"5\"\n", "optional_request_dict": {"merchantID": "5"}}, "rollbar_uuid": "a661df79-dcc5-450e-b32b-2857788aaa36", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 61, in GetGeneralMerchant\n    return merchant_service_pb2.MerchantsResponse(generalMerchants=merchants, executed=True)\nTypeError: Value must be iterable\n"}
{"message": "Error in call to GetGeneralMerchant: TypeError('Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got Merchant.')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T00:49:11.086237", "request": {"raw": "merchantID: \"5\"\n", "optional_request_dict": {"merchantID": "5"}}, "rollbar_uuid": "2b65f59b-e27d-4bcf-89d5-7534b2def9c4", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 62, in GetGeneralMerchant\n    return merchant_service_pb2.MerchantsResponse(generalMerchants=merchants, executed=True)\nTypeError: Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got Merchant.\n"}
{"message": "Error in call to GetGeneralMerchant: TypeError('Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got Merchant.')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T00:49:46.767328", "request": {"raw": "merchantID: \"5\"\n", "optional_request_dict": {"merchantID": "5"}}, "rollbar_uuid": "e267b924-c3a5-47d9-8eac-7da193350206", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 62, in GetGeneralMerchant\n    return merchant_service_pb2.MerchantsResponse(generalMerchants=merchants, executed=True)\nTypeError: Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got Merchant.\n"}
{"message": "Error in call to GetGeneralMerchant: TypeError('Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got Merchant.')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T00:52:02.334236", "request": {"raw": "merchantID: \"5\"\n", "optional_request_dict": {"merchantID": "5"}}, "rollbar_uuid": "ad7bb6ff-b819-4ada-884d-8d44fe16d8ec", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 62, in GetGeneralMerchant\n    return merchant_service_pb2.MerchantsResponse(generalMerchants=merchants, executed=True)\nTypeError: Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got Merchant.\n"}
{"message": "Error in call to GetGeneralMerchant: TypeError('Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got Merchant.')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T00:52:15.116534", "request": {"raw": "", "optional_request_dict": {}}, "rollbar_uuid": "ef3a0723-5705-45cc-996e-5c1bacfc5897", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 62, in GetGeneralMerchant\n    return merchant_service_pb2.MerchantsResponse(generalMerchants=merchants, executed=True)\nTypeError: Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got Merchant.\n"}
{"message": "Error in call to CreatePartnerMerchant: IntegrityError('(psycopg2.errors.NotNullViolation) null value in column \"id\" violates not-null constraint\\nDETAIL:  Failing row contains (null, 2020-06-07 00:56:40.218632+01, null, 2020-06-07 00:56:40.218632+01, null, greggs, food).\\n')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T00:56:40.347894", "request": {"raw": "partnerMerchant {\n  name: \"greggs\"\n  sector: \"food\"\n}\n", "optional_request_dict": {"partnerMerchant": {"name": "greggs", "sector": "food"}}}, "rollbar_uuid": "dc1971ef-938f-452d-aa97-06bb4e7a0ba5", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.NotNullViolation: null value in column \"id\" violates not-null constraint\nDETAIL:  Failing row contains (null, 2020-06-07 00:56:40.218632+01, null, 2020-06-07 00:56:40.218632+01, null, greggs, food).\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 46, in CreatePartnerMerchant\n    session.commit()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 1042, in commit\n    self.transaction.commit()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 504, in commit\n    self._prepare_impl()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 483, in _prepare_impl\n    self.session.flush()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2523, in flush\n    self._flush(objects)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2664, in _flush\n    transaction.rollback(_capture_exception=True)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py\", line 69, in __exit__\n    exc_value, with_traceback=exc_tb,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2624, in _flush\n    flush_context.execute()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py\", line 422, in execute\n    rec.execute(self)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py\", line 589, in execute\n    uow,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py\", line 245, in save_obj\n    insert,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py\", line 1136, in _emit_insert_statements\n    statement, params\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1020, in execute\n    return meth(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/elements.py\", line 298, in _execute_on_connection\n    return connection._execute_clauseelement(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1139, in _execute_clauseelement\n    distilled_params,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1324, in _execute_context\n    e, statement, parameters, cursor, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1518, in _handle_dbapi_exception\n    sqlalchemy_exception, with_traceback=exc_info[2], from_=e\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column \"id\" violates not-null constraint\nDETAIL:  Failing row contains (null, 2020-06-07 00:56:40.218632+01, null, 2020-06-07 00:56:40.218632+01, null, greggs, food).\n\n[SQL: INSERT INTO merchants (deleted_at, name, sector) VALUES (%(deleted_at)s, %(name)s, %(sector)s)]\n[parameters: {'deleted_at': None, 'name': 'greggs', 'sector': 'food'}]\n(Background on this error at: http://sqlalche.me/e/gkpj)\n"}
{"message": "Error in call to CreatePartnerMerchant: ProgrammingError('(psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\\n')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T01:00:30.012962", "request": {"raw": "partnerMerchant {\n  name: \"greggs\"\n  sector: \"food\"\n}\n", "optional_request_dict": {"partnerMerchant": {"name": "greggs", "sector": "food"}}}, "rollbar_uuid": "e009c75b-f4ce-4743-9b4a-ab10a94bd86f", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.DuplicateTable: relation \"merchants\" already exists\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 40, in CreatePartnerMerchant\n    Merchant.metadata.create_all(self.db_engine, checkfirst=False)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/schema.py\", line 4465, in create_all\n    ddl.SchemaGenerator, self, checkfirst=checkfirst, tables=tables\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 2104, in _run_visitor\n    conn._run_visitor(visitorcallable, element, **kwargs)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1663, in _run_visitor\n    visitorcallable(self.dialect, self, **kwargs).traverse_single(element)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 787, in visit_metadata\n    _is_metadata_operation=True,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 832, in visit_table\n    include_foreign_key_constraints,  # noqa\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1020, in execute\n    return meth(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 72, in _execute_on_connection\n    return connection._execute_ddl(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1082, in _execute_ddl\n    compiled,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1324, in _execute_context\n    e, statement, parameters, cursor, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1518, in _handle_dbapi_exception\n    sqlalchemy_exception, with_traceback=exc_info[2], from_=e\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\n\n[SQL: \nCREATE TABLE merchants (\n\tid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, \n\tdeleted_at TIMESTAMP WITH TIME ZONE, \n\tupdated_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, \n\t\"merchantID\" SERIAL NOT NULL, \n\tname VARCHAR NOT NULL, \n\tsector VARCHAR NOT NULL, \n\tPRIMARY KEY (\"merchantID\", id)\n)\n\n]\n(Background on this error at: http://sqlalche.me/e/f405)\n"}
{"message": "Error in call to CreatePartnerMerchant: IntegrityError('(psycopg2.errors.NotNullViolation) null value in column \"id\" violates not-null constraint\\nDETAIL:  Failing row contains (null, 2020-06-07 01:00:48.759025+01, null, 2020-06-07 01:00:48.759025+01, 1, greggs, food).\\n')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T01:00:48.869944", "request": {"raw": "partnerMerchant {\n  name: \"greggs\"\n  sector: \"food\"\n}\n", "optional_request_dict": {"partnerMerchant": {"name": "greggs", "sector": "food"}}}, "rollbar_uuid": "5947812d-a7bf-497d-a835-1cdc46077975", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.NotNullViolation: null value in column \"id\" violates not-null constraint\nDETAIL:  Failing row contains (null, 2020-06-07 01:00:48.759025+01, null, 2020-06-07 01:00:48.759025+01, 1, greggs, food).\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 46, in CreatePartnerMerchant\n    session.commit()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 1042, in commit\n    self.transaction.commit()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 504, in commit\n    self._prepare_impl()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 483, in _prepare_impl\n    self.session.flush()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2523, in flush\n    self._flush(objects)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2664, in _flush\n    transaction.rollback(_capture_exception=True)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py\", line 69, in __exit__\n    exc_value, with_traceback=exc_tb,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2624, in _flush\n    flush_context.execute()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py\", line 422, in execute\n    rec.execute(self)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py\", line 589, in execute\n    uow,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py\", line 245, in save_obj\n    insert,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py\", line 1136, in _emit_insert_statements\n    statement, params\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1020, in execute\n    return meth(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/elements.py\", line 298, in _execute_on_connection\n    return connection._execute_clauseelement(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1139, in _execute_clauseelement\n    distilled_params,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1324, in _execute_context\n    e, statement, parameters, cursor, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1518, in _handle_dbapi_exception\n    sqlalchemy_exception, with_traceback=exc_info[2], from_=e\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column \"id\" violates not-null constraint\nDETAIL:  Failing row contains (null, 2020-06-07 01:00:48.759025+01, null, 2020-06-07 01:00:48.759025+01, 1, greggs, food).\n\n[SQL: INSERT INTO merchants (deleted_at, name, sector) VALUES (%(deleted_at)s, %(name)s, %(sector)s) RETURNING merchants.\"merchantID\"]\n[parameters: {'deleted_at': None, 'name': 'greggs', 'sector': 'food'}]\n(Background on this error at: http://sqlalche.me/e/gkpj)\n"}
{"message": "Error in call to CreatePartnerMerchant: ProgrammingError('(psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\\n')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T01:01:08.528324", "request": {"raw": "partnerMerchant {\n  name: \"greggs\"\n  sector: \"food\"\n}\n", "optional_request_dict": {"partnerMerchant": {"name": "greggs", "sector": "food"}}}, "rollbar_uuid": "84beef87-d0b2-4733-924d-f0b023c476aa", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.DuplicateTable: relation \"merchants\" already exists\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 40, in CreatePartnerMerchant\n    Merchant.metadata.create_all(self.db_engine, checkfirst=False)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/schema.py\", line 4465, in create_all\n    ddl.SchemaGenerator, self, checkfirst=checkfirst, tables=tables\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 2104, in _run_visitor\n    conn._run_visitor(visitorcallable, element, **kwargs)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1663, in _run_visitor\n    visitorcallable(self.dialect, self, **kwargs).traverse_single(element)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 787, in visit_metadata\n    _is_metadata_operation=True,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 832, in visit_table\n    include_foreign_key_constraints,  # noqa\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1020, in execute\n    return meth(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 72, in _execute_on_connection\n    return connection._execute_ddl(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1082, in _execute_ddl\n    compiled,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1324, in _execute_context\n    e, statement, parameters, cursor, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1518, in _handle_dbapi_exception\n    sqlalchemy_exception, with_traceback=exc_info[2], from_=e\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\n\n[SQL: \nCREATE TABLE merchants (\n\tid INTEGER NOT NULL, \n\tcreated_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, \n\tdeleted_at TIMESTAMP WITH TIME ZONE, \n\tupdated_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, \n\t\"merchantID\" SERIAL NOT NULL, \n\tname VARCHAR NOT NULL, \n\tsector VARCHAR NOT NULL, \n\tPRIMARY KEY (\"merchantID\", id)\n)\n\n]\n(Background on this error at: http://sqlalche.me/e/f405)\n"}
{"message": "Error in call to CreatePartnerMerchant: IntegrityError('(psycopg2.errors.NotNullViolation) null value in column \"id\" violates not-null constraint\\nDETAIL:  Failing row contains (null, 2020-06-07 01:01:24.546545+01, null, 2020-06-07 01:01:24.546545+01, 1, greggs, food).\\n')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T01:01:24.679480", "request": {"raw": "partnerMerchant {\n  name: \"greggs\"\n  sector: \"food\"\n}\n", "optional_request_dict": {"partnerMerchant": {"name": "greggs", "sector": "food"}}}, "rollbar_uuid": "ce98e15e-a358-4a2a-9696-b357adc1889e", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.NotNullViolation: null value in column \"id\" violates not-null constraint\nDETAIL:  Failing row contains (null, 2020-06-07 01:01:24.546545+01, null, 2020-06-07 01:01:24.546545+01, 1, greggs, food).\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 46, in CreatePartnerMerchant\n    session.commit()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 1042, in commit\n    self.transaction.commit()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 504, in commit\n    self._prepare_impl()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 483, in _prepare_impl\n    self.session.flush()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2523, in flush\n    self._flush(objects)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2664, in _flush\n    transaction.rollback(_capture_exception=True)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py\", line 69, in __exit__\n    exc_value, with_traceback=exc_tb,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py\", line 2624, in _flush\n    flush_context.execute()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py\", line 422, in execute\n    rec.execute(self)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py\", line 589, in execute\n    uow,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py\", line 245, in save_obj\n    insert,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py\", line 1136, in _emit_insert_statements\n    statement, params\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1020, in execute\n    return meth(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/elements.py\", line 298, in _execute_on_connection\n    return connection._execute_clauseelement(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1139, in _execute_clauseelement\n    distilled_params,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1324, in _execute_context\n    e, statement, parameters, cursor, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1518, in _handle_dbapi_exception\n    sqlalchemy_exception, with_traceback=exc_info[2], from_=e\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column \"id\" violates not-null constraint\nDETAIL:  Failing row contains (null, 2020-06-07 01:01:24.546545+01, null, 2020-06-07 01:01:24.546545+01, 1, greggs, food).\n\n[SQL: INSERT INTO merchants (deleted_at, name, sector) VALUES (%(deleted_at)s, %(name)s, %(sector)s) RETURNING merchants.\"merchantID\"]\n[parameters: {'deleted_at': None, 'name': 'greggs', 'sector': 'food'}]\n(Background on this error at: http://sqlalche.me/e/gkpj)\n"}
{"message": "Error in call to CreatePartnerMerchant: ProgrammingError('(psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\\n')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T01:26:34.125122", "request": {"raw": "partnerMerchant {\n  name: \"greggs\"\n  sector: \"food\"\n}\n", "optional_request_dict": {"partnerMerchant": {"name": "greggs", "sector": "food"}}}, "rollbar_uuid": "406262a6-18f5-4a37-8a97-e67e81444383", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.DuplicateTable: relation \"merchants\" already exists\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 40, in CreatePartnerMerchant\n    Merchant.metadata.create_all(self.db_engine, checkfirst=False)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/schema.py\", line 4465, in create_all\n    ddl.SchemaGenerator, self, checkfirst=checkfirst, tables=tables\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 2104, in _run_visitor\n    conn._run_visitor(visitorcallable, element, **kwargs)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1663, in _run_visitor\n    visitorcallable(self.dialect, self, **kwargs).traverse_single(element)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 787, in visit_metadata\n    _is_metadata_operation=True,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 832, in visit_table\n    include_foreign_key_constraints,  # noqa\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1020, in execute\n    return meth(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 72, in _execute_on_connection\n    return connection._execute_ddl(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1082, in _execute_ddl\n    compiled,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1324, in _execute_context\n    e, statement, parameters, cursor, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1518, in _handle_dbapi_exception\n    sqlalchemy_exception, with_traceback=exc_info[2], from_=e\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\n\n[SQL: \nCREATE TABLE merchants (\n\tcreated_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, \n\tdeleted_at TIMESTAMP WITH TIME ZONE, \n\tupdated_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, \n\tname VARCHAR NOT NULL, \n\tsector VARCHAR NOT NULL, \n\t\"merchantID\" SERIAL NOT NULL, \n\tPRIMARY KEY (\"merchantID\")\n)\n\n]\n(Background on this error at: http://sqlalche.me/e/f405)\n"}
{"message": "Error in call to GetGeneralMerchant: TypeError('Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got Merchant.')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T01:30:32.242292", "request": {"raw": "merchantID: \"1\"\n", "optional_request_dict": {"merchantID": "1"}}, "rollbar_uuid": "4d6362df-114c-4702-9c9e-72509c73da0e", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 62, in GetGeneralMerchant\n    return merchant_service_pb2.MerchantsResponse(generalMerchants=merchants, executed=True)\nTypeError: Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got Merchant.\n"}
{"message": "Error in call to GetGeneralMerchant: TypeError('Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got NoneType.')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T01:30:35.785918", "request": {"raw": "merchantID: \"4\"\n", "optional_request_dict": {"merchantID": "4"}}, "rollbar_uuid": "23dabca1-01f3-46ee-b1e0-03d3af2009a2", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 62, in GetGeneralMerchant\n    return merchant_service_pb2.MerchantsResponse(generalMerchants=merchants, executed=True)\nTypeError: Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got NoneType.\n"}
{"message": "Error in call to GetGeneralMerchant: TypeError('Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got NoneType.')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T01:31:12.331452", "request": {"raw": "merchantID: \"4\"\n", "optional_request_dict": {"merchantID": "4"}}, "rollbar_uuid": "4ebbaaf6-d83f-45e7-991f-8826c1f5ed27", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 62, in GetGeneralMerchant\n    return merchant_service_pb2.MerchantsResponse(generalMerchants=merchants, executed=True)\nTypeError: Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got NoneType.\n"}
{"message": "Error in call to GetGeneralMerchant: InvalidRequestError(\"Entity '<class 'service.lib.psql.schemas.merchant.Merchant'>' has no property 'merchantID'\")", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T01:40:42.362223", "request": {"raw": "merchantID: \"4\"\n", "optional_request_dict": {"merchantID": "4"}}, "rollbar_uuid": "19dfafa4-1a75-46cc-9acc-4177063dec8d", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/base.py\", line 406, in _entity_descriptor\n    return getattr(entity, key)\nAttributeError: type object 'Merchant' has no attribute 'merchantID'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 56, in GetGeneralMerchant\n    merchant = session.query(Merchant).filter_by(**optional_request_dict).all()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py\", line 1895, in filter_by\n    for key, value in kwargs.items()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py\", line 1895, in <listcomp>\n    for key, value in kwargs.items()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/base.py\", line 412, in _entity_descriptor\n    replace_context=err,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\nsqlalchemy.exc.InvalidRequestError: Entity '<class 'service.lib.psql.schemas.merchant.Merchant'>' has no property 'merchantID'\n"}
{"message": "Error in call to GetGeneralMerchant: TypeError('Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got list.')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T01:42:35.504173", "request": {"raw": "merchantID: \"4\"\n", "optional_request_dict": {"merchantID": "4"}}, "rollbar_uuid": "bdb8557c-129a-4fd1-a772-4ccd9ce3f6ab", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 58, in GetGeneralMerchant\n    return merchant_service_pb2.MerchantsResponse(generalMerchants=merchants, executed=True)\nTypeError: Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got list.\n"}
{"message": "Error in call to GetGeneralMerchant: TypeError('Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got Merchant.')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T01:43:49.952340", "request": {"raw": "merchantID: \"1\"\n", "optional_request_dict": {"merchantID": "1"}}, "rollbar_uuid": "100994f4-2752-4c74-ade3-1481d714363e", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 57, in GetGeneralMerchant\n    return merchant_service_pb2.MerchantsResponse(generalMerchants=merchants, executed=True)\nTypeError: Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got Merchant.\n"}
{"message": "Error in call to GetGeneralMerchant: AttributeError(\"'Merchant' object has no attribute 'id'\")", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T01:45:26.127102", "request": {"raw": "", "optional_request_dict": {}}, "rollbar_uuid": "e65ac0b2-1771-4efb-b76a-a56482b87907", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 57, in GetGeneralMerchant\n    print(merchants)\n  File \"/Users/noah/Otis/backend/service/lib/psql/schemas/merchant.py\", line 27, in __repr__\n    return \"<Merchant(id='%s', name='%s')>\" % (self.id, self.name)\nAttributeError: 'Merchant' object has no attribute 'id'\n"}
{"message": "Error in call to GetGeneralMerchant: AttributeError(\"'Merchant' object has no attribute 'id'\")", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T01:45:43.691021", "request": {"raw": "", "optional_request_dict": {}}, "rollbar_uuid": "5c72185f-5686-47ad-b98f-e6f6d24e3c36", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 57, in GetGeneralMerchant\n    print(merchants)\n  File \"/Users/noah/Otis/backend/service/lib/psql/schemas/merchant.py\", line 27, in __repr__\n    return \"<Merchant(id='%s', name='%s')>\" % (self.id, self.name)\nAttributeError: 'Merchant' object has no attribute 'id'\n"}
{"message": "Error in call to GetGeneralMerchant: AttributeError(\"'Merchant' object has no attribute 'id'\")", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T01:48:19.308239", "request": {"raw": "", "optional_request_dict": {}}, "rollbar_uuid": "81d4fe53-eca8-4415-9c6b-f38b35e7bb1f", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 57, in GetGeneralMerchant\n    print(merchants)\n  File \"/Users/noah/Otis/backend/service/lib/psql/schemas/merchant.py\", line 27, in __repr__\n    return \"<Merchant(id='%s', name='%s')>\" % (self.id, self.name)\nAttributeError: 'Merchant' object has no attribute 'id'\n"}
{"message": "Error in call to GetGeneralMerchant: AttributeError(\"'Merchant' object has no attribute 'id'\")", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T01:49:18.413341", "request": {"raw": "", "optional_request_dict": {}}, "rollbar_uuid": "05c1da78-c073-4baa-8ade-6890e5733d57", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 57, in GetGeneralMerchant\n    print(merchants)\n  File \"/Users/noah/Otis/backend/service/lib/psql/schemas/merchant.py\", line 27, in __repr__\n    return \"<Merchant(merchantID='%s', name='%s'...)>\" % (self.id, self.name)\nAttributeError: 'Merchant' object has no attribute 'id'\n"}
{"message": "Error in call to GetGeneralMerchant: TypeError('Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got Merchant.')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T01:49:44.031590", "request": {"raw": "", "optional_request_dict": {}}, "rollbar_uuid": "3b098964-ee5e-4b1b-b9ff-4b4f659b7a96", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 58, in GetGeneralMerchant\n    return merchant_service_pb2.MerchantsResponse(generalMerchants=merchants, executed=True)\nTypeError: Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got Merchant.\n"}
{"message": "Error in call to GetGeneralMerchant: TypeError('Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got Merchant.')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T01:50:40.007605", "request": {"raw": "merchantID: \"1\"\n", "optional_request_dict": {"merchantID": "1"}}, "rollbar_uuid": "84164464-1597-4fb1-a4d4-31181e919322", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 58, in GetGeneralMerchant\n    return merchant_service_pb2.MerchantsResponse(generalMerchants=merchants, executed=True)\nTypeError: Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got Merchant.\n"}
{"message": "Error in call to GetGeneralMerchant: TypeError('Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got Merchant.')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T01:50:49.314722", "request": {"raw": "", "optional_request_dict": {}}, "rollbar_uuid": "bda7aadd-a616-4a0d-975a-fa9222cccd25", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 58, in GetGeneralMerchant\n    return merchant_service_pb2.MerchantsResponse(generalMerchants=merchants, executed=True)\nTypeError: Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got Merchant.\n"}
{"message": "Error in call to GetGeneralMerchant: TypeError('Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got list.')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T01:52:11.047967", "request": {"raw": "", "optional_request_dict": {}}, "rollbar_uuid": "924baaba-a564-402a-ab3b-363f7dd68c3c", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 58, in GetGeneralMerchant\n    return merchant_service_pb2.MerchantsResponse(generalMerchants=[merchants], executed=True)\nTypeError: Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got list.\n"}
{"message": "Error in call to GetGeneralMerchant: TypeError('Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got Merchant.')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T02:00:45.069337", "request": {"raw": "", "optional_request_dict": {}}, "rollbar_uuid": "e687e03a-f453-4181-8db9-57623786e1df", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 60, in GetGeneralMerchant\n    return merchant_service_pb2.MerchantsResponse(generalMerchants=merchants, executed=True)\nTypeError: Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got Merchant.\n"}
{"message": "Error in call to GetGeneralMerchant: TypeError('Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got Merchant.')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T02:03:35.777263", "request": {"raw": "merchantID: \"1\"\n", "optional_request_dict": {"merchantID": "1"}}, "rollbar_uuid": "34feae20-26e2-4864-a1d0-c4cc890b2063", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 60, in GetGeneralMerchant\n    return merchant_service_pb2.MerchantsResponse(generalMerchants=merchants, executed=True)\nTypeError: Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got Merchant.\n"}
{"message": "Error in call to GetGeneralMerchant: TypeError('Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got Merchant.')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T02:04:38.578364", "request": {"raw": "", "optional_request_dict": {}}, "rollbar_uuid": "01b41c2f-084c-4557-a5f9-b010a3420057", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 60, in GetGeneralMerchant\n    return merchant_service_pb2.MerchantsResponse(generalMerchants=merchants, executed=True)\nTypeError: Parameter to MergeFrom() must be instance of same class: expected generalmerchant.GeneralMerchant got Merchant.\n"}
{"message": "Error in call to GetPartnerMerchant: TypeError('Parameter to MergeFrom() must be instance of same class: expected partnermerchant.PartnerMerchant got Merchant.')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T02:05:03.548515", "request": {"raw": "merchantID: \"1\"\n", "optional_request_dict": {"merchantID": "1"}}, "rollbar_uuid": "fe791aae-082e-45b3-8ea1-5db37882a46b", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 71, in GetPartnerMerchant\n    return merchant_service_pb2.MerchantsResponse(partnerMerchants=merchants, executed=True)\nTypeError: Parameter to MergeFrom() must be instance of same class: expected partnermerchant.PartnerMerchant got Merchant.\n"}
{"message": "Error in call to GetPartnerMerchant: TypeError('Parameter to MergeFrom() must be instance of same class: expected partnermerchant.PartnerMerchant got Merchant.')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T02:05:31.603101", "request": {"raw": "", "optional_request_dict": {}}, "rollbar_uuid": "49abd997-c569-4e3f-a8dc-a252f83ba8e8", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 71, in GetPartnerMerchant\n    return merchant_service_pb2.MerchantsResponse(partnerMerchants=merchants, executed=True)\nTypeError: Parameter to MergeFrom() must be instance of same class: expected partnermerchant.PartnerMerchant got Merchant.\n"}
{"message": "Error in call to CreatePartnerMerchant: ProgrammingError('(psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\\n')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T02:14:51.075100", "request": {"raw": "partnerMerchant {\n  name: \"gregories\"\n  sector: \"food\"\n}\n", "optional_request_dict": {"partnerMerchant": {"name": "gregories", "sector": "food"}}}, "rollbar_uuid": "a4bb425d-48a7-4db9-a65f-d98bafbb3fc6", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.DuplicateTable: relation \"merchants\" already exists\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 41, in CreatePartnerMerchant\n    Merchant.metadata.create_all(self.db_engine, checkfirst=False)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/schema.py\", line 4465, in create_all\n    ddl.SchemaGenerator, self, checkfirst=checkfirst, tables=tables\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 2104, in _run_visitor\n    conn._run_visitor(visitorcallable, element, **kwargs)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1663, in _run_visitor\n    visitorcallable(self.dialect, self, **kwargs).traverse_single(element)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 787, in visit_metadata\n    _is_metadata_operation=True,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/visitors.py\", line 144, in traverse_single\n    return meth(obj, **kw)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 832, in visit_table\n    include_foreign_key_constraints,  # noqa\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1020, in execute\n    return meth(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/sql/ddl.py\", line 72, in _execute_on_connection\n    return connection._execute_ddl(self, multiparams, params)\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1082, in _execute_ddl\n    compiled,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1324, in _execute_context\n    e, statement, parameters, cursor, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1518, in _handle_dbapi_exception\n    sqlalchemy_exception, with_traceback=exc_info[2], from_=e\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py\", line 1284, in _execute_context\n    cursor, statement, parameters, context\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py\", line 590, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.DuplicateTable) relation \"merchants\" already exists\n\n[SQL: \nCREATE TABLE merchants (\n\tcreated_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, \n\tdeleted_at TIMESTAMP WITH TIME ZONE, \n\tupdated_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, \n\tname VARCHAR NOT NULL, \n\tsector VARCHAR NOT NULL, \n\t\"merchantID\" SERIAL NOT NULL, \n\tPRIMARY KEY (\"merchantID\")\n)\n\n]\n(Background on this error at: http://sqlalche.me/e/f405)\n"}
{"message": "Error in call to GetPartnerMerchant: InvalidRequestError(\"Entity '<class 'service.lib.psql.schemas.merchant.Merchant'>' has no property 'merchantID'\")", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T02:17:14.582368", "request": {"raw": "merchantID: \"8\"\n", "optional_request_dict": {"merchantID": "8"}}, "rollbar_uuid": "186f5f3f-9a2e-450d-a1c7-0593008c99f6", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/base.py\", line 406, in _entity_descriptor\n    return getattr(entity, key)\nAttributeError: type object 'Merchant' has no attribute 'merchantID'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 69, in GetPartnerMerchant\n    merchants = session.query(Merchant).filter_by(**optional_request_dict).all()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py\", line 1895, in filter_by\n    for key, value in kwargs.items()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py\", line 1895, in <listcomp>\n    for key, value in kwargs.items()\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/orm/base.py\", line 412, in _entity_descriptor\n    replace_context=err,\n  File \"/Users/noah/Otis/backend/service/merchant/merchant-service-venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py\", line 178, in raise_\n    raise exception\nsqlalchemy.exc.InvalidRequestError: Entity '<class 'service.lib.psql.schemas.merchant.Merchant'>' has no property 'merchantID'\n"}
{"message": "Error in call to GetPartnerMerchant: TypeError('Parameter to MergeFrom() must be instance of same class: expected partnermerchant.PartnerMerchant got Merchant.')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T02:22:06.096729", "request": {"raw": "merchantID: \"1\"\n", "optional_request_dict": {"merchantID": "1"}}, "rollbar_uuid": "db3b4d6f-6efb-46e1-88ee-fd1ede0240a7", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 71, in GetPartnerMerchant\n    return merchant_service_pb2.MerchantsResponse(partnerMerchants=merchants, executed=True)\nTypeError: Parameter to MergeFrom() must be instance of same class: expected partnermerchant.PartnerMerchant got Merchant.\n"}
{"message": "Error in call to GetPartnerMerchant: TypeError('Parameter to MergeFrom() must be instance of same class: expected partnermerchant.PartnerMerchant got Merchant.')", "level": "ERROR", "name": "merchant-service", "time": "2020-06-07T02:22:15.447918", "request": {"raw": "", "optional_request_dict": {}}, "rollbar_uuid": "e161f261-c2eb-48f5-9dda-b69448b5b05a", "traceback": "Traceback (most recent call last):\n  File \"/Users/noah/Otis/backend/service/lib/utils/wrappers.py\", line 18, in wrap\n    return_value = func(*args, **kwargs, optional_request_dict=request_dict)\n  File \"./impl/impl.py\", line 71, in GetPartnerMerchant\n    return merchant_service_pb2.MerchantsResponse(partnerMerchants=merchants, executed=True)\nTypeError: Parameter to MergeFrom() must be instance of same class: expected partnermerchant.PartnerMerchant got Merchant.\n"}
